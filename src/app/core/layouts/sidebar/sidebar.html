<nav class="navbar navbar-expand-lg fixed-top shadow-sm">
  <div class="container-fluid">
    <button class="btn btn-link text-decoration-none p-0 me-3" type="button" data-bs-toggle="offcanvas"
      data-bs-target="#sidebarMenu" aria-controls="sidebarMenu">
      <i class="bi bi-list fs-3 text-sidebar"></i>
    </button>

    <a class="navbar-brand d-flex align-items-center gap-2 mb-0" [routerLink]="['/home']">
      <i class="bi bi-rocket-takeoff fs-4"></i>
      <span class="fw-semibold d-none d-md-inline">{{ title }}</span>
    </a>

    <form class="d-none d-lg-flex mx-auto" style="max-width: 400px; flex: 1;">
      <div class="input-group">
        <span class="input-group-text bg-transparent border-end-0">
          <i class="bi bi-search text-muted"></i>
        </span>
        <input type="search" class="form-control border-start-0 ps-0" placeholder="Search..." [(ngModel)]="searchValue"
          (ngModelChange)="onSearchChange($event)" [ngModelOptions]="{standalone: true}">
        @if (searchValue) {
        <button class="btn btn-link text-decoration-none" type="button" (click)="clearSearch()">
          <i class="bi bi-x-lg text-muted"></i>
        </button>
        }
      </div>
    </form>

    <div class="d-flex align-items-center">
      <button class="btn btn-link text-decoration-none p-2" type="button" (click)="toggleTheme()"
        [attr.aria-label]="themeService.isDarkMode() ? 'Switch to light mode' : 'Switch to dark mode'">
        @if (themeService.isDarkMode()) {
        <i class="bi bi-sun-fill fs-5"></i>
        } @else {
        <i class="bi bi-moon-fill fs-5"></i>
        }
      </button>

      <div class="dropdown">
        <button class="btn btn-link text-decoration-none d-flex align-items-center p-2 gap-2 dropdown-toggle"
          type="button" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="bi bi-person-circle fs-5 text-sidebar"></i>
          <span class="fw-medium d-none d-xl-inline text-sidebar">Marcos Cucoro</span>
        </button>
        <ul class="dropdown-menu dropdown-menu-dark">
          <li><a class="dropdown-item" href="#">Profile</a></li>
          <li><a class="dropdown-item" href="#">Settings</a></li>
          <li>
            <hr class="dropdown-divider">
          </li>
          <li><a class="dropdown-item" [routerLink]="['']">Log out</a></li>
        </ul>
      </div>
    </div>
  </div>

  <div class="container-fluid d-lg-none mt-2 pb-2">
    <div class="input-group">
      <span class="input-group-text bg-transparent border-end-0">
        <i class="bi bi-search text-muted"></i>
      </span>
      <input type="search" class="form-control border-start-0 ps-0" placeholder="Search..." [(ngModel)]="searchValue"
        (ngModelChange)="onSearchChange($event)" [ngModelOptions]="{standalone: true}">
      @if (searchValue) {
      <button class="btn btn-link text-decoration-none" type="button" (click)="clearSearch()">
        <i class="bi bi-x-lg text-muted"></i>
      </button>
      }
    </div>
  </div>
</nav>

<div class="offcanvas offcanvas-start" tabindex="-1" id="sidebarMenu" aria-labelledby="sidebarMenuLabel">
  <div class="offcanvas-header border-bottom">
    <div class="d-flex align-items-center gap-2">
      <i class="bi bi-rocket-takeoff fs-4" style="color: var(--sidebar-primary);"></i>
      <h5 class="offcanvas-title mb-0 text-sidebar" id="sidebarMenuLabel">Menu</h5>
    </div>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body p-0">
    <ul class="nav nav-pills flex-column">
      @for (item of menuItems; track item.route) {
      <li class="nav-item">
        <a class="nav-link d-flex align-items-center gap-3 px-4 py-3"
          [routerLink]="item.route"
          routerLinkActive="active"
          (click)="closeOffcanvas()">
          <i class="bi {{ item.icon }} fs-5"></i>
          <span>{{ item.label }}</span>
        </a>
      </li>
      }
    </ul>
  </div>
</div>

<div class="content-wrapper">
  <ng-content></ng-content>
</div>
